<md-toolbar ng-controller="headerCtrl">

    <div class="md-toolbar-tools fusion-header-toolbar">

        <md-button class="fusion-header-button" aria-label="Fusion Menu" ng-disabled="!userLoggedIn()" ng-click="openFusionMenu()">
            <i class="fas fa-bars fa-2x"></i>
        </md-button>

        <md-button class="fusion-header-logo" aria-label="Mimio MyBot Logo" ng-disabled="!userLoggedIn()" ng-click="navigateHome()">
            <span style="font-weight: 600;">Mimio</span>
            <span style="font-weight: 200;">MyBot</span>
        </md-button>

        <div class="fusion-header-title" md-truncate flex>| {{ appData.CurrentPageTitle | translate }} |</div>

        <md-menu hide-xs md-offset="0 50">
            <md-button class="fusion-header-button" aria-label="Current Language" ng-click="openLanguageMenu($mdOpenMenu, $event)">
                <div ng-bind="selectedLanguage()" style="text-decoration: underline;"></div>
            </md-button>
            <md-menu-content width="4">
                <md-menu-item ng-repeat="language in supportedLanguages">
                    <md-button ng-click="changeLanguage(language)" translate-language="{{language}}" translate="LANGUAGE"></md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>

        <md-button hide-xs class="header-battery fusion-header-button" aria-label="Battery" ng-disabled="!userLoggedIn()" ng-click="showBatteryDetails(ev)">
            <i class="fas fa-battery-empty fa-2x"></i>
        </md-button>

        <md-button hide-xs class="header-internet fusion-header-button" aria-label="Internet" ng-disabled="!userLoggedIn()" ng-click="showInternetDetails(ev)">
            <i class="fas fa-exclamation-triangle fa-2x"></i>
        </md-button>

        <md-button hide-xs class="header-wifi fusion-header-button" aria-label="Classroom Server" ng-disabled="!userLoggedIn()" ng-click="showWifiDetails(ev)">
            <i class="fas fa-unlink fa-2x"></i>
        </md-button>

        <md-button hide-xs class="header-program fusion-header-button" aria-label="Running Program" ng-disabled="!userLoggedIn()" ng-click="showProgramDetails(ev)">
            <i class="fas fa-stop fa-2x"></i>
        </md-button>

        <md-menu hide-xs md-position-mode="target-right target" md-offset="0 50">
            <md-button class="fusion-header-button" aria-label="Power Menu" ng-disabled="!userLoggedIn()" ng-click="openWifiMenu($mdMenu, $event)">
                <i class="fas fa-unlink fa-2x"></i>
            </md-button>
            <md-menu-content width="4">
                <md-menu-item ng-repeat="connection in availableWifiConnections">
                    <md-button ng-click="connectToNetwork(connection)" >{{connection.ssid}}</md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>

        <md-menu hide-xs md-position-mode="target-right target" md-offset="0 50">
            <md-button class="fusion-header-button" aria-label="Power Menu" ng-disabled="!userLoggedIn()" ng-click="openPowerMenu($mdOpenMenu, $event)">
                <i class="fas fa-power-off fa-2x"></i>
            </md-button>
            <md-menu-content width="4">
                <md-menu-item>
                    <md-button ng-disabled="allowUpdate()" ng-click="showUpdateDialog()">
                        <div layout="row" flex>
                            <p flex>Update</p>
                            <i class="fa fa-download fusion-power-option-icon"></i>
                        </div>
                    </md-button>
                </md-menu-item>
                <md-menu-divider></md-menu-divider>
                <md-menu-item>
                    <md-button ng-click="powerOff()">
                        <div layout="row" flex>
                            <p flex translate="HEADER.POWER_OFF"></p>
                            <i class="fa fa-power-off fusion-power-option-icon"></i>
                        </div>
                    </md-button>
                </md-menu-item>
                <md-menu-item>
                    <md-button ng-click="restart()">
                        <div layout="row" flex>
                            <p flex translate="HEADER.RESTART"></p>
                            <i class="fa fa-sync fusion-power-option-icon"></i>
                        </div>
                    </md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>

    </div>

    <!-- Connect to network dialog -->
    <div style="visibility: hidden">
        <div class="md-dialog-container" id="settingsConnectNetworkDialog">
            <md-dialog>
                <md-dialog-content class="md-dialog-content">
                    <h2 class="md-title" translate="SETTINGS.NETWORK_CONNECTION_DIALOG.TITLE"></h2>
                    <div></div>
                    <form ng-submit="connectToNetworkPassword()">
                        <md-input-container layout="row">
                            <label translate="SETTINGS.NETWORK_CONNECTION_DIALOG.PASSKEY"></label>
                            <input flex id="selectedWirelessConnectionPasswordInput" type="password" ng-model="SelectedWirelessConnectionPassword" md-autofocus required>
                        </md-input-container>
                    </form>
                </md-dialog-content>
                <md-dialog-actions>
                    <md-switch aria-label="Show password" class="md-primary" ng-click="togglePasswordShowing()" translate="SETTINGS.NETWORK_CONNECTION_DIALOG.VIEW_PASSKEY"></md-switch>
                    <md-button aria-label="Cancel" class="md-accent" ng-click="closeDialog()" translate="SETTINGS.NETWORK_CONNECTION_DIALOG.CANCEL"></md-button>
                    <md-button aria-label="Ok" class="md-primary md-raised" ng-click="connectToNetworkPassword()" translate="SETTINGS.NETWORK_CONNECTION_DIALOG.OK"></md-button>
                </md-dialog-actions>
            </md-dialog>
        </div>
    </div>

    <!-- Update dialog -->
    <div style="visibility: hidden">
        <div class="md-dialog-container" id="updateDialog">
            <md-dialog style="height:50%; width: 50%;">
                <md-dialog-content class="md-dialog-content" flex layout="column">
                    <h2 class="md-title" translate="SETTINGS.FUSION_SOFTWARE_MANAGEMENT"></h2>
                    <textarea flex id="update-console" placeholder="{{'SETTINGS.TERMINAL_PLACEHOLDER' | translate }}" readonly="true" class="fusion-settings-software-body" ng-model="updateConsole"></textarea>
                </md-dialog-content>
                <md-dialog-actions>
                    <md-button aria-label="Cancel" class="md-accent" ng-click="closeDialog()">Cancel</md-button>
                    <md-button aria-label="Update" class="md-primary md-raised" ng-click="updateFusion()" ng-disabled="allowUpdate()">Update</md-button>
                </md-dialog-actions>
            </md-dialog>
        </div>
    </div>

</md-toolbar>